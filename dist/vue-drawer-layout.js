!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e():"function"==typeof define&&define.amd?define(e):e()}(0,function(){"use strict";var t=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var i=[],n=!0,a=!1,o=void 0;try{for(var s,r=t[Symbol.iterator]();!(n=(s=r.next()).done)&&(i.push(s.value),!e||i.length!==e);n=!0);}catch(t){a=!0,o=t}finally{try{!n&&r.return&&r.return()}finally{if(a)throw o}}return i}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();!function(){if("undefined"!=typeof document){var t=document.head||document.getElementsByTagName("head")[0],e=document.createElement("style"),i=".drawer-layout[data-v-7e696ca1] { position: absolute; top: 0; left: 0; bottom: 0; right: 0; overflow: hidden; } .drawer-wrap[data-v-7e696ca1] { position: absolute; top: 0; bottom: 0; transform: translateZ(0); } .content-wrap[data-v-7e696ca1] { position: absolute; top: 0; right: 0; bottom: 0; left: 0; overflow: hidden; transform: translateZ(0); } .drawer-mask[data-v-7e696ca1] { position: absolute; top: 0; right: 0; bottom: 0; left: 0; background-color: #000; z-index: 818; } .moving[data-v-7e696ca1] { transition: transform 0.3s ease; } .will-change[data-v-7e696ca1] { will-change: transform; } ";e.type="text/css",e.styleSheet?e.styleSheet.cssText=i:e.appendChild(document.createTextNode(i)),t.appendChild(e)}}();var e=Math.floor(.8*document.body.clientWidth),i=function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("test",null,e)}catch(t){}return t}(),n="ontouchstart"in window?{down:"touchstart",move:"touchmove",up:"touchend"}:{down:"mousedown",move:"mousemove",up:"mouseup"},a={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"drawer-layout"},[i("div",{staticClass:"drawer-wrap",class:{moving:t.moving,"will-change":t.willChange},style:{zIndex:t.zIndex,width:t.width+"px",left:"-"+Math.ceil(t.width*t.moveRate)+"px",transform:"translate3d("+Math.ceil(t.pos*t.moveRate)+"px,0,0)"}},[t._t("drawer")],2),t._v(" "),i("div",{staticClass:"content-wrap",class:{moving:t.moving,"will-change":t.willChange},style:t.contentDrawable?{transform:"translate3d("+t.pos+"px,0,0)"}:{}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.backdrop&&t.pos,expression:"backdrop && pos"}],staticClass:"drawer-mask",style:{opacity:t.backdropOpacity},on:{click:t.handleMaskClick}}),t._v(" "),t._t("content")],2)])},staticRenderFns:[],_scopeId:"data-v-7e696ca1",name:"vue-drawer-layout",props:{width:{type:Number,default:e},drawableDistance:{type:Number,default:e},zIndex:{type:Number,default:818},contentDrawable:{type:Boolean,default:!1},backdrop:{type:Boolean,default:!0},backdropOpacityRange:{type:Array,default:function(){return[0,.4]},validator:function(e){var i=t(e,2),n=i[0],a=i[1];return n<a&&n>=0&&a<=1}},enable:{type:Boolean,default:!0},animatable:{type:Boolean,default:!0}},data:function(){return{pos:0,visible:!1,moving:!1,willChange:!1}},methods:{toggle:function(t){void 0===t&&(t=!this.visible),this.visible=t,this.pos=t?this.width:0,this.moving=!0},handleMaskClick:function(){this.moving||this.$emit("mask-click")}},watch:{moving:function(){this.animatable||(this.moving=!1)},willChange:function(){this.animatable||(this.willChange=!1)}},computed:{backdropOpacity:function(){var e=this.backdropOpacityRange,i=this.pos,n=this.width,a=t(e,2);return a[0]+a[1]*(i/n)||0},moveRate:function(){var t=this.width;return this.drawableDistance/t}},mounted:function(){var t=this,e=this.width,a=window.document,o=void 0,s=void 0,r=void 0,d=void 0,l=void 0,c=void 0,h=void 0,u=void 0,v=void 0,p=void 0,m=function(t){this.enable&&(this.willChange=!0,p=void 0,c=d=t.clientX||t.changedTouches[0].clientX,l=t.clientY||t.changedTouches[0].clientY,s=+new Date,v=this.pos,a.addEventListener(n.move,f,!!i&&{passive:!0}),a.addEventListener(n.up,w,!!i&&{passive:!0}),this.$emit("slide-start"))}.bind(this),f=function(t){o=s,s=+new Date,u=c,c=t.clientX||t.changedTouches[0].clientX,h=t.clientY||t.changedTouches[0].clientY,r=(c-u)/(s-o);var n=v+c-d;n=Math.min(e,n),n=Math.max(0,n),void 0===p&&(p=Math.abs(h-l)/Math.abs(c-d)>Math.sqrt(3)/3),p||(i||t.preventDefault(),this.pos=n,this.$emit("slide-move",n))}.bind(this),w=function(t){if(void 0!==p){if(!p){var o=this.pos;this.visible=r>0?(e-o)/r<500||o>3*e/5:!((0-o)/r<500||o<3*e/5),this.pos>0&&this.pos<e&&(this.moving=!0)}this.pos=this.visible?e:0}this.moving||(this.willChange=!1,this.$emit("slide-end",this.visible)),p=void 0,a.removeEventListener(n.move,f,!!i&&{passive:!0}),a.removeEventListener(n.up,w,!!i&&{passive:!0})}.bind(this);"transitionend webkitTransitionEnd msTransitionEnd otransitionend oTransitionEnd".split(" ").forEach(function(i){t.$el.addEventListener(i,function(){t.moving&&(t.moving=!1,t.willChange=!1,t.pos=t.visible?e:0,t.$emit("slide-end",t.visible))},!1)}),a.addEventListener(n.down,m,!!i&&{passive:!0})}};module.exports={DrawerLayout:a,install:function t(e){t.installed||e.component(a.name,a)}},module.exports.default=module.exports});
